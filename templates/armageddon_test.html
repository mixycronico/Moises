<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema Genesis - Prueba ARMAGEDÓN</title>
    <link rel="stylesheet" href="/static/css/styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        .control-panel {
            background: rgba(20, 20, 40, 0.9);
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            border: 1px solid #3a3a6a;
            box-shadow: 0 0 20px rgba(0, 0, 255, 0.2);
        }
        
        .status-panel {
            background: rgba(20, 20, 40, 0.9);
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            border: 1px solid #3a3a6a;
            box-shadow: 0 0 20px rgba(82, 0, 255, 0.2);
        }
        
        .results-panel {
            background: rgba(20, 20, 40, 0.9);
            border-radius: 10px;
            padding: 20px;
            margin-bottom: a;
            border: 1px solid #3a3a6a;
            box-shadow: 0 0 20px rgba(0, 200, 255, 0.2);
            max-height: 500px;
            overflow-y: auto;
        }
        
        .quantum-button {
            background: linear-gradient(135deg, #4a00e0, #8e2de2);
            color: white;
            border: none;
            padding: 12px 24px;
            font-size: 16px;
            cursor: pointer;
            border-radius: 6px;
            font-weight: bold;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
            margin-right: 10px;
            margin-bottom: 10px;
        }
        
        .quantum-button:hover {
            background: linear-gradient(135deg, #6200ea, #a742ff);
            transform: translateY(-2px);
            box-shadow: 0 6px 10px rgba(0, 0, 0, 0.2);
        }
        
        .quantum-button:disabled {
            background: linear-gradient(135deg, #666, #999);
            cursor: not-allowed;
            transform: none;
        }
        
        .apocalyptic-button {
            background: linear-gradient(135deg, #ff0844, #ffb199);
            color: white;
            border: none;
            padding: 15px 30px;
            font-size: 18px;
            cursor: pointer;
            border-radius: 6px;
            font-weight: bold;
            box-shadow: 0 4px 12px rgba(255, 8, 68, 0.3);
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .apocalyptic-button:hover {
            background: linear-gradient(135deg, #ff0844, #ff416c);
            transform: translateY(-3px);
            box-shadow: 0 8px 15px rgba(255, 8, 68, 0.4);
        }
        
        .apocalyptic-button:disabled {
            background: linear-gradient(135deg, #666, #999);
            cursor: not-allowed;
            transform: none;
        }
        
        .progress-container {
            width: 100%;
            background-color: rgba(30, 30, 60, 0.5);
            border-radius: 10px;
            margin: 20px 0;
            overflow: hidden;
        }
        
        .progress-bar {
            height: 30px;
            width: 0%;
            background: linear-gradient(90deg, #00c9ff, #92fe9d);
            border-radius: 10px;
            transition: width 0.5s ease;
            position: relative;
            box-shadow: 0 0 10px rgba(0, 201, 255, 0.5);
        }
        
        .progress-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: white;
            font-weight: bold;
            text-shadow: 0 0 3px rgba(0, 0, 0, 0.5);
        }
        
        .status-indicator {
            display: inline-block;
            width: 15px;
            height: 15px;
            border-radius: 50%;
            margin-right: 8px;
        }
        
        .status-idle {
            background-color: #8e8e8e;
            box-shadow: 0 0 8px rgba(142, 142, 142, 0.8);
        }
        
        .status-running {
            background-color: #2196F3;
            box-shadow: 0 0 8px rgba(33, 150, 243, 0.8);
            animation: pulse 1.5s infinite;
        }
        
        .status-success {
            background-color: #4CAF50;
            box-shadow: 0 0 8px rgba(76, 175, 80, 0.8);
        }
        
        .status-error {
            background-color: #F44336;
            box-shadow: 0 0 8px rgba(244, 67, 54, 0.8);
        }
        
        @keyframes pulse {
            0% {
                transform: scale(1);
                opacity: 1;
            }
            50% {
                transform: scale(1.2);
                opacity: 0.8;
            }
            100% {
                transform: scale(1);
                opacity: 1;
            }
        }
        
        .result-card {
            background: rgba(30, 30, 60, 0.7);
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
            border-left: 4px solid #6200ea;
        }
        
        .metric-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
        }
        
        .metric-label {
            color: #a6b0cf;
            font-weight: 500;
        }
        
        .metric-value {
            color: #ffffff;
            font-weight: 700;
        }
        
        .pattern-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }
        
        .pattern-table th, .pattern-table td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .pattern-table th {
            background-color: rgba(50, 50, 80, 0.5);
            color: #d7dcef;
            font-weight: 600;
        }
        
        .pattern-table tr:hover {
            background-color: rgba(80, 80, 120, 0.3);
        }
        
        .success-rate-high {
            color: #4CAF50;
            font-weight: bold;
        }
        
        .success-rate-medium {
            color: #FFC107;
            font-weight: bold;
        }
        
        .success-rate-low {
            color: #F44336;
            font-weight: bold;
        }
        
        .report-container {
            background: rgba(25, 25, 45, 0.8);
            border-radius: 10px;
            padding: 20px;
            margin-top: 30px;
            border: 1px solid #3a3a6a;
            max-height: 600px;
            overflow-y: auto;
        }
        
        /* Estilos para el markdown del reporte */
        .markdown-report h1 {
            color: #92fe9d;
            border-bottom: 1px solid rgba(146, 254, 157, 0.3);
            padding-bottom: 10px;
        }
        
        .markdown-report h2 {
            color: #00c9ff;
            margin-top: 25px;
        }
        
        .markdown-report table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }
        
        .markdown-report th, .markdown-report td {
            padding: 10px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .markdown-report th {
            background-color: rgba(0, 201, 255, 0.2);
        }
        
        .markdown-report ul {
            list-style-type: none;
            padding-left: 20px;
        }
        
        .markdown-report li {
            position: relative;
            padding-left: 25px;
            margin-bottom: 10px;
        }
        
        .markdown-report li:before {
            content: "•";
            position: absolute;
            left: 0;
            color: #92fe9d;
            font-size: 20px;
            top: -3px;
        }
    </style>
</head>
<body class="dark-theme">
    <div class="container">
        <header>
            <div class="logo">
                <img src="/static/img/genesis-logo.svg" alt="Genesis Logo">
                <h1>Sistema Genesis</h1>
            </div>
            <nav>
                <ul>
                    <li><a href="/">Inicio</a></li>
                    <li><a href="/dashboard">Dashboard</a></li>
                    <li><a href="/trading-process">Trading</a></li>
                    <li><a href="/cryptos">Hot Cryptos</a></li>
                    <li><a href="/armageddon" class="active">ARMAGEDÓN</a></li>
                </ul>
            </nav>
        </header>
        
        <main>
            <section class="hero-section">
                <h1 class="title">Prueba ARMAGEDÓN DIVINA</h1>
                <p class="subtitle">La prueba definitiva para el Sistema Genesis Trascendental</p>
            </section>
            
            <section class="content-section">
                <div class="control-panel">
                    <h2><i class="fas fa-sliders-h"></i> Panel de Control ARMAGEDÓN</h2>
                    <p>Inicie la prueba ARMAGEDÓN DIVINA para verificar la resiliencia absoluta del Sistema Genesis.</p>
                    <div class="button-row">
                        <button id="btn-initialize" class="quantum-button"><i class="fas fa-power-off"></i> Inicializar Sistema</button>
                        <button id="btn-prepare-db" class="quantum-button" disabled><i class="fas fa-database"></i> Preparar Base de Datos</button>
                        <button id="btn-start-test" class="apocalyptic-button" disabled><i class="fas fa-radiation"></i> INICIAR ARMAGEDÓN</button>
                        <button id="btn-stop-test" class="quantum-button" disabled><i class="fas fa-stop-circle"></i> Detener Prueba</button>
                    </div>
                </div>
                
                <div class="status-panel">
                    <h2><i class="fas fa-heartbeat"></i> Estado del Sistema</h2>
                    <div class="status-row">
                        <p><span class="status-indicator status-idle" id="system-status-indicator"></span> 
                        <strong>Estado:</strong> <span id="system-status">Inactivo</span></p>
                    </div>
                    <div class="progress-container" id="progress-container" style="display: none;">
                        <div class="progress-bar" id="progress-bar">
                            <div class="progress-text" id="progress-text">0%</div>
                        </div>
                    </div>
                    <div id="status-details">
                        <p><strong>Patrones ejecutados:</strong> <span id="patterns-executed">0/8</span></p>
                        <p><strong>Tiempo transcurrido:</strong> <span id="elapsed-time">0s</span></p>
                        <p><strong>Operaciones procesadas:</strong> <span id="operations-processed">0</span></p>
                        <p><strong>Operaciones por segundo:</strong> <span id="operations-per-second">0</span></p>
                    </div>
                </div>
                
                <div class="results-panel" id="results-panel" style="display: none;">
                    <h2><i class="fas fa-chart-bar"></i> Resultados de la Prueba</h2>
                    <div class="result-card">
                        <h3>Métricas Generales</h3>
                        <div class="metric-row">
                            <span class="metric-label">Tasa de Éxito General:</span>
                            <span class="metric-value" id="success-rate">N/A</span>
                        </div>
                        <div class="metric-row">
                            <span class="metric-label">Operaciones Totales:</span>
                            <span class="metric-value" id="total-operations">N/A</span>
                        </div>
                        <div class="metric-row">
                            <span class="metric-label">Operaciones por Segundo:</span>
                            <span class="metric-value" id="ops-per-second">N/A</span>
                        </div>
                        <div class="metric-row">
                            <span class="metric-label">Tiempo de Respuesta Promedio:</span>
                            <span class="metric-value" id="avg-response-time">N/A</span>
                        </div>
                        <div class="metric-row">
                            <span class="metric-label">Pico de Concurrencia:</span>
                            <span class="metric-value" id="concurrent-peak">N/A</span>
                        </div>
                        <div class="metric-row">
                            <span class="metric-label">Duración Total:</span>
                            <span class="metric-value" id="total-duration">N/A</span>
                        </div>
                    </div>
                    
                    <div class="result-card">
                        <h3>Rendimiento por Patrón</h3>
                        <table class="pattern-table" id="pattern-table">
                            <thead>
                                <tr>
                                    <th>Patrón</th>
                                    <th>Tasa de Éxito</th>
                                    <th>Operaciones</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- Se llenará dinámicamente -->
                            </tbody>
                        </table>
                    </div>
                    
                    <div class="result-card">
                        <h3>Recuperación y Resiliencia</h3>
                        <div class="metric-row">
                            <span class="metric-label">Eventos de Recuperación:</span>
                            <span class="metric-value" id="recovery-events">N/A</span>
                        </div>
                        <div class="metric-row">
                            <span class="metric-label">Tasa de Éxito de Recuperación:</span>
                            <span class="metric-value" id="recovery-success-rate">N/A</span>
                        </div>
                        <div class="metric-row">
                            <span class="metric-label">Tiempo Promedio de Recuperación:</span>
                            <span class="metric-value" id="recovery-avg-time">N/A</span>
                        </div>
                    </div>
                </div>
                
                <div class="report-container" id="report-container" style="display: none;">
                    <h2><i class="fas fa-file-alt"></i> Reporte Detallado</h2>
                    <div class="markdown-report" id="markdown-report">
                        <!-- El contenido del reporte se cargará dinámicamente -->
                    </div>
                </div>
            </section>
        </main>
        
        <footer>
            <p>&copy; 2025 Sistema Genesis Trascendental. Todos los derechos reservados.</p>
        </footer>
    </div>
    
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script src="/static/js/armageddon.js"></script>
</body>
</html>