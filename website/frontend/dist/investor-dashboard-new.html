<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Panel de Inversionista - Sistema Genesis">
  <meta name="theme-color" content="#3d1a78">
  <title>Mi Portafolio | Proyecto Genesis</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Orbitron:wght@400;500;600;700&display=swap">
  <style>
    /* Variables */
    :root {
      --color-primary: #7b61ff;
      --color-secondary: #5f3ebb;
      --color-accent: #ff27b3;
      --color-success: #42e8c3;
      --color-warning: #ffb86c;
      --color-danger: #ff5371;
      --color-background: #2c1259;
      --color-card-bg: rgba(59, 35, 113, 0.7);
      --color-sidebar: #3b2371;
      --color-text: #e1eaff;
      --color-text-secondary: #a8a0c0;
      --color-border: rgba(123, 97, 255, 0.3);
      --color-gradient-1: #7b61ff;
      --color-gradient-2: #42e8c3;
      --color-gradient-3: #ff5371;
      --color-gradient-4: #ffb86c;
      --color-chart-1: #ffb86c;
      --color-chart-2: #42e8c3;
      --color-chart-3: #ff5371;
      --color-chart-4: #7b61ff;
      --font-display: 'Orbitron', sans-serif;
      --font-body: 'Poppins', sans-serif;
      --spacing-xs: 0.25rem;
      --spacing-sm: 0.5rem;
      --spacing-md: 1rem;
      --spacing-lg: 1.5rem;
      --spacing-xl: 2rem;
      --border-radius-sm: 4px;
      --border-radius-md: 8px;
      --border-radius-lg: 12px;
      --border-radius-xl: 20px;
      --border-radius-circle: 50%;
      --shadow-sm: 0 2px 5px rgba(0, 0, 0, 0.2);
      --shadow-md: 0 4px 8px rgba(0, 0, 0, 0.3);
      --shadow-lg: 0 8px 16px rgba(0, 0, 0, 0.4);
      --shadow-inner: inset 0 2px 5px rgba(0, 0, 0, 0.2);
      --shadow-glow: 0 0 10px rgba(123, 97, 255, 0.5);
    }
    
    /* Estilos base */
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }
    
    body {
      margin: 0;
      padding: 0;
      background: var(--color-background);
      color: var(--color-text);
      font-family: var(--font-body);
      min-height: 100vh;
      background-image: linear-gradient(135deg, var(--color-background) 0%, #1a0b33 100%);
      font-size: 14px;
      line-height: 1.6;
      font-weight: 400;
      overflow-x: hidden;
    }
    
    a {
      color: var(--color-text);
      text-decoration: none;
      transition: color 0.3s ease;
    }
    
    a:hover {
      color: var(--color-primary);
    }
    
    h1, h2, h3, h4, h5, h6 {
      font-family: var(--font-display);
      font-weight: 600;
      color: var(--color-text);
      margin-bottom: var(--spacing-sm);
    }
    
    /* Fondos con estrellas */
    #stars {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: -1;
      pointer-events: none;
    }
    
    /* Layout principal */
    .main-container {
      display: flex;
      min-height: 100vh;
    }
    
    /* Barra superior */
    .header {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      height: 60px;
      background-color: rgba(44, 18, 89, 0.9);
      backdrop-filter: blur(10px);
      z-index: 100;
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 0 var(--spacing-lg);
      border-bottom: 1px solid rgba(123, 97, 255, 0.2);
    }
    
    .logo {
      display: flex;
      align-items: center;
      height: 40px;
    }
    
    .logo img {
      height: 100%;
    }
    
    .logo-text {
      margin-left: var(--spacing-sm);
      font-family: var(--font-display);
      font-weight: 700;
      font-size: 18px;
      background: linear-gradient(to right, var(--color-gradient-1), var(--color-gradient-2));
      -webkit-background-clip: text;
      background-clip: text;
      -webkit-text-fill-color: transparent;
      text-transform: uppercase;
      letter-spacing: 1px;
    }
    
    .header-actions {
      display: flex;
      align-items: center;
      gap: var(--spacing-md);
    }
    
    .search-bar {
      position: relative;
    }
    
    .search-input {
      background-color: rgba(90, 65, 167, 0.2);
      border: 1px solid rgba(123, 97, 255, 0.3);
      border-radius: var(--border-radius-lg);
      color: var(--color-text);
      padding: var(--spacing-sm) var(--spacing-md);
      padding-left: 35px;
      font-size: 14px;
      width: 250px;
      transition: all 0.3s ease;
    }
    
    .search-input:focus {
      outline: none;
      border-color: var(--color-primary);
      background-color: rgba(90, 65, 167, 0.3);
      box-shadow: var(--shadow-glow);
    }
    
    .search-icon {
      position: absolute;
      left: 10px;
      top: 50%;
      transform: translateY(-50%);
      color: var(--color-text-secondary);
      font-size: 16px;
    }
    
    .header-icon {
      width: 35px;
      height: 35px;
      border-radius: var(--border-radius-circle);
      background-color: rgba(90, 65, 167, 0.3);
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: all 0.3s ease;
    }
    
    .header-icon:hover {
      background-color: rgba(123, 97, 255, 0.5);
    }
    
    /* Barra lateral */
    .sidebar {
      width: 280px;
      background-color: var(--color-sidebar);
      border-right: 1px solid rgba(123, 97, 255, 0.2);
      flex-shrink: 0;
      overflow-y: auto;
      padding-top: 80px; /* Espacio para la barra superior */
    }
    
    .user-profile {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: var(--spacing-md);
      padding: var(--spacing-lg);
      border-bottom: 1px solid rgba(123, 97, 255, 0.2);
      position: relative;
    }
    
    .profile-photo-container {
      position: relative;
      margin-bottom: var(--spacing-sm);
    }
    
    .avatar {
      width: 100px;
      height: 100px;
      border-radius: var(--border-radius-circle);
      background-color: var(--color-primary);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 36px;
      color: white;
      font-weight: 600;
      border: 3px solid rgba(123, 97, 255, 0.5);
      box-shadow: var(--shadow-glow);
      background-size: cover;
      background-position: center;
      position: relative;
      overflow: hidden;
    }
    
    .photo-upload-button {
      position: absolute;
      bottom: 5px;
      right: 5px;
      width: 30px;
      height: 30px;
      border-radius: var(--border-radius-circle);
      background-color: var(--color-accent);
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      box-shadow: var(--shadow-md);
      transition: all 0.3s ease;
      opacity: 0.7;
      font-size: 14px;
    }
    
    .photo-upload-button:hover {
      opacity: 1;
      transform: scale(1.1);
    }
    
    .user-role {
      font-size: 12px;
      color: var(--color-text-secondary);
      margin-top: -5px;
    }
    
    .user-info {
      text-align: center;
    }
    
    .user-name {
      font-size: 18px;
      font-weight: 600;
    }
    
    .user-role {
      font-size: 12px;
      color: var(--color-text-secondary);
      margin-top: -5px;
    }
    
    .category-badges {
      display: flex;
      gap: var(--spacing-xs);
      margin-top: var(--spacing-sm);
      justify-content: center;
    }
    
    .category-badge {
      padding: 3px 8px;
      border-radius: var(--border-radius-sm);
      font-size: 10px;
      font-weight: 600;
      text-transform: uppercase;
    }
    
    .category-bronze {
      background-color: #cd7f32;
      color: white;
    }
    
    .category-silver {
      background-color: #c0c0c0;
      color: #333;
    }
    
    .category-gold {
      background-color: #ffd700;
      color: #333;
    }
    
    .category-platinum {
      background: linear-gradient(to right, #e5e4e2, #bdb5b5, #e5e4e2);
      color: #333;
    }
    
    .nav-item {
      display: flex;
      align-items: center;
      gap: var(--spacing-md);
      padding: var(--spacing-md) var(--spacing-lg);
      cursor: pointer;
      transition: all 0.3s ease;
      border-left: 3px solid transparent;
    }
    
    .nav-item.active {
      background-color: rgba(123, 97, 255, 0.2);
      border-left-color: var(--color-primary);
    }
    
    .nav-item:hover:not(.active) {
      background-color: rgba(123, 97, 255, 0.1);
    }
    
    .icon {
      width: 20px;
      height: 20px;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .sidebar-footer {
      padding: var(--spacing-lg);
      border-top: 1px solid rgba(123, 97, 255, 0.2);
      margin-top: auto;
    }
    
    .quick-links {
      margin-bottom: var(--spacing-lg);
    }
    
    .quick-links h4 {
      font-size: 12px;
      margin-bottom: var(--spacing-sm);
      color: var(--color-text-secondary);
    }
    
    .quick-links-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: var(--spacing-sm);
    }
    
    .quick-link {
      background-color: rgba(90, 65, 167, 0.3);
      border-radius: var(--border-radius-sm);
      height: 40px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: all 0.3s ease;
    }
    
    .quick-link:hover {
      background-color: rgba(123, 97, 255, 0.5);
    }
    
    .chat-support h4 {
      font-size: 12px;
      margin-bottom: var(--spacing-sm);
      color: var(--color-text-secondary);
    }
    
    .support-status {
      display: flex;
      align-items: center;
      gap: var(--spacing-sm);
      font-size: 12px;
    }
    
    .online-indicator {
      width: 8px;
      height: 8px;
      border-radius: var(--border-radius-circle);
      background-color: var(--color-success);
    }
    
    /* Contenido principal */
    .content {
      flex-grow: 1;
      padding: 80px var(--spacing-lg) var(--spacing-lg);
      overflow-y: auto;
    }
    
    .page-header {
      margin-bottom: var(--spacing-lg);
    }
    
    .welcome-message {
      font-size: 24px;
      font-weight: 600;
      margin-bottom: var(--spacing-sm);
    }
    
    .date-display {
      color: var(--color-text-secondary);
    }
    
    /* Tarjetas de resumen */
    .summary-cards {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: var(--spacing-md);
      margin-bottom: var(--spacing-lg);
    }
    
    .card {
      background-color: var(--color-card-bg);
      border-radius: var(--border-radius-lg);
      padding: var(--spacing-lg);
      box-shadow: var(--shadow-md);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(123, 97, 255, 0.2);
      transition: all 0.3s ease;
    }
    
    .card:hover {
      transform: translateY(-5px);
      box-shadow: var(--shadow-lg);
    }
    
    .card-header {
      margin-bottom: var(--spacing-md);
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
    }
    
    .card-icon-container {
      width: 40px;
      height: 40px;
      border-radius: var(--border-radius-md);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 18px;
      background-color: rgba(123, 97, 255, 0.2);
    }
    
    .card-title {
      font-size: 14px;
      color: var(--color-text-secondary);
      margin-bottom: var(--spacing-xs);
    }
    
    .card-value {
      font-size: 24px;
      font-weight: 600;
    }
    
    .card-footer {
      margin-top: var(--spacing-md);
      font-size: 12px;
      display: flex;
      align-items: center;
      gap: var(--spacing-xs);
    }
    
    .change-indicator {
      display: flex;
      align-items: center;
      gap: 2px;
    }
    
    .positive-change {
      color: var(--color-success);
    }
    
    .negative-change {
      color: var(--color-danger);
    }
    
    /* Gráficos circulares */
    .performance-section {
      margin-bottom: var(--spacing-lg);
    }
    
    .section-title {
      font-size: 18px;
      margin-bottom: var(--spacing-md);
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    
    .section-subtitle {
      font-size: 12px;
      color: var(--color-text-secondary);
    }
    
    .charts-row {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: var(--spacing-md);
    }
    
    .chart-container {
      position: relative;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: var(--spacing-lg);
    }
    
    .chart-label {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      text-align: center;
    }
    
    .chart-percentage {
      font-size: 24px;
      font-weight: 700;
    }
    
    .chart-description {
      font-size: 12px;
      color: var(--color-text-secondary);
      margin-top: var(--spacing-xs);
    }
    
    /* Sección principal de datos */
    .main-data-section {
      display: grid;
      grid-template-columns: 2fr 1fr;
      gap: var(--spacing-lg);
    }
    
    .tabs-container {
      margin-bottom: var(--spacing-md);
    }
    
    .tabs {
      display: flex;
      gap: var(--spacing-md);
      border-bottom: 1px solid rgba(123, 97, 255, 0.2);
    }
    
    .tab {
      padding: var(--spacing-sm) var(--spacing-md);
      cursor: pointer;
      border-bottom: 2px solid transparent;
      transition: all 0.3s ease;
      font-weight: 500;
    }
    
    .tab.active {
      border-bottom-color: var(--color-primary);
      color: var(--color-primary);
    }
    
    /* Tabla de inversiones */
    .table-container {
      margin-top: var(--spacing-md);
      overflow-x: auto;
    }
    
    table {
      width: 100%;
      border-collapse: collapse;
    }
    
    thead {
      background-color: rgba(123, 97, 255, 0.1);
    }
    
    th, td {
      padding: var(--spacing-sm) var(--spacing-md);
      text-align: left;
    }
    
    th {
      font-weight: 600;
      color: var(--color-text-secondary);
      font-size: 12px;
      text-transform: uppercase;
    }
    
    tr {
      border-bottom: 1px solid rgba(123, 97, 255, 0.1);
    }
    
    tbody tr:hover {
      background-color: rgba(123, 97, 255, 0.05);
    }
    
    /* Tipo de transacción */
    .transaction-type {
      display: inline-block;
      padding: 2px 8px;
      border-radius: var(--border-radius-sm);
      font-size: 11px;
      font-weight: 600;
      text-transform: uppercase;
    }
    
    .transaction-deposit {
      background-color: rgba(46, 204, 113, 0.2);
      color: var(--color-success);
    }
    
    .transaction-withdrawal {
      background-color: rgba(231, 76, 60, 0.2);
      color: var(--color-danger);
    }
    
    .transaction-bonus {
      background-color: rgba(241, 196, 15, 0.2);
      color: var(--color-warning);
    }
    
    .transaction-profit {
      background-color: rgba(52, 152, 219, 0.2);
      color: #3498db;
    }
    
    /* Estado */
    .status {
      display: inline-block;
      padding: 2px 8px;
      border-radius: var(--border-radius-sm);
      font-size: 11px;
      font-weight: 600;
    }
    
    .status-online {
      background-color: rgba(46, 204, 113, 0.2);
      color: var(--color-success);
    }
    
    .status-pending {
      background-color: rgba(241, 196, 15, 0.2);
      color: var(--color-warning);
    }
    
    .status-failed {
      background-color: rgba(231, 76, 60, 0.2);
      color: var(--color-danger);
    }
    
    /* Categoría e Info */
    .category-info {
      background-color: var(--color-card-bg);
      border-radius: var(--border-radius-lg);
      padding: var(--spacing-lg);
      margin-bottom: var(--spacing-lg);
    }
    
    .category-progress-container {
      margin-top: var(--spacing-md);
    }
    
    .progress-bar-container {
      width: 100%;
      height: 8px;
      background-color: rgba(123, 97, 255, 0.1);
      border-radius: var(--border-radius-sm);
      overflow: hidden;
      margin-bottom: var(--spacing-xs);
    }
    
    .progress-bar {
      height: 100%;
      background: linear-gradient(to right, var(--color-gradient-1), var(--color-gradient-2));
      border-radius: var(--border-radius-sm);
      transition: width 1s ease-in-out;
    }
    
    .progress-text {
      font-size: 12px;
      color: var(--color-text-secondary);
    }
    
    /* Componente recientes */
    .recent-activity {
      margin-top: var(--spacing-lg);
    }
    
    .activity-item {
      display: flex;
      gap: var(--spacing-sm);
      padding: var(--spacing-sm) 0;
      border-bottom: 1px solid rgba(123, 97, 255, 0.1);
    }
    
    .activity-icon {
      width: 30px;
      height: 30px;
      border-radius: var(--border-radius-circle);
      background-color: rgba(123, 97, 255, 0.2);
      display: flex;
      align-items: center;
      justify-content: center;
      flex-shrink: 0;
    }
    
    .activity-content {
      flex-grow: 1;
    }
    
    .activity-title {
      font-weight: 500;
      margin-bottom: 2px;
    }
    
    .activity-time {
      font-size: 12px;
      color: var(--color-text-secondary);
    }
    
    /* Formulario para subir foto */
    #photoUploadForm {
      display: none;
    }
    
    /* Botones */
    .button {
      padding: var(--spacing-sm) var(--spacing-md);
      border-radius: var(--border-radius-md);
      font-weight: 500;
      cursor: pointer;
      transition: all 0.3s ease;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: var(--spacing-xs);
      border: none;
      font-family: var(--font-body);
    }
    
    .button-primary {
      background: linear-gradient(to right, var(--color-gradient-1), var(--color-gradient-2));
      color: white;
    }
    
    .button-secondary {
      background-color: rgba(123, 97, 255, 0.2);
      color: var(--color-text);
    }
    
    .button-primary:hover {
      box-shadow: 0 0 15px rgba(123, 97, 255, 0.5);
      transform: translateY(-2px);
    }
    
    .button-secondary:hover {
      background-color: rgba(123, 97, 255, 0.3);
    }
    
    /* Selector de periodo */
    .period-selector {
      display: flex;
      gap: var(--spacing-xs);
      padding: 2px;
      background-color: rgba(123, 97, 255, 0.1);
      border-radius: var(--border-radius-md);
    }
    
    .period-option {
      padding: 5px 10px;
      font-size: 12px;
      border-radius: var(--border-radius-sm);
      cursor: pointer;
    }
    
    .period-option.active {
      background-color: var(--color-primary);
      color: white;
    }
    
    /* Calendario */
    .calendar {
      margin-top: var(--spacing-md);
    }
    
    .calendar-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: var(--spacing-sm);
    }
    
    .calendar-grid {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      gap: 2px;
    }
    
    .calendar-day {
      text-align: center;
      padding: 5px;
      font-size: 12px;
    }
    
    .calendar-day-header {
      font-weight: 600;
      color: var(--color-text-secondary);
    }
    
    .calendar-day.today {
      background-color: var(--color-primary);
      border-radius: var(--border-radius-sm);
      color: white;
    }
    
    .calendar-day.has-event {
      position: relative;
    }
    
    .calendar-day.has-event::after {
      content: '';
      position: absolute;
      bottom: 2px;
      left: 50%;
      transform: translateX(-50%);
      width: 4px;
      height: 4px;
      border-radius: var(--border-radius-circle);
      background-color: var(--color-accent);
    }
    
    /* Responsivo */
    @media (max-width: 1200px) {
      .summary-cards {
        grid-template-columns: repeat(2, 1fr);
      }
      
      .charts-row {
        grid-template-columns: repeat(2, 1fr);
      }
      
      .main-data-section {
        grid-template-columns: 1fr;
      }
    }
    
    @media (max-width: 768px) {
      .sidebar {
        width: 240px;
      }
      
      .summary-cards {
        grid-template-columns: 1fr;
      }
      
      .charts-row {
        grid-template-columns: 1fr;
      }
      
      .search-input {
        width: 180px;
      }
    }
    
    @media (max-width: 576px) {
      .sidebar {
        position: fixed;
        left: -280px;
        top: 0;
        height: 100%;
        z-index: 200;
        transition: left 0.3s ease;
      }
      
      .sidebar.open {
        left: 0;
      }
      
      .header {
        padding: 0 var(--spacing-md);
      }
      
      .search-input {
        width: 120px;
      }
    }
  </style>
</head>
<body>
  <!-- Fondo de estrellas -->
  <div id="stars"></div>
  
  <!-- Barra superior -->
  <header class="header">
    <div class="logo">
      <img src="/static/logo.png" alt="Genesis Logo" />
      <div class="logo-text">Genesis</div>
    </div>
    
    <div class="search-bar">
      <input type="text" class="search-input" placeholder="Buscar..." />
      <div class="search-icon">🔍</div>
    </div>
    
    <div class="header-actions">
      <div class="header-icon">📬</div>
      <div class="header-icon">🔔</div>
      <div class="header-icon">⚙️</div>
    </div>
  </header>
  
  <!-- Contenedor principal -->
  <div class="main-container">
    <!-- Barra lateral -->
    <div class="sidebar">
      <div class="user-profile">
        <div class="profile-photo-container">
          <div class="avatar" id="userAvatar">
            <!-- La foto de perfil o iniciales se mostrarán aquí -->
          </div>
          <div class="photo-upload-button" id="photoUploadBtn">
            <i class="icon">📷</i>
          </div>
        </div>
        <div class="user-info">
          <div class="user-name" id="userName">Cargando...</div>
          <div class="user-role" id="userRole">Cargando...</div>
          <div id="categoryBadgeContainer" class="category-badges"></div>
        </div>
        
        <!-- Formulario oculto para subir foto -->
        <form id="photoUploadForm" style="display:none;">
          <input type="file" id="photoInput" accept="image/*">
        </form>
      </div>
      
      <div class="nav-item active">
        <i class="icon">📊</i>
        <span>Dashboard</span>
      </div>
      <div class="nav-item">
        <i class="icon">💰</i>
        <span>Inversiones</span>
      </div>
      <div class="nav-item">
        <i class="icon">💳</i>
        <span>Transacciones</span>
      </div>
      <div class="nav-item">
        <i class="icon">🔄</i>
        <span>Transferencias</span>
      </div>
      <div class="nav-item">
        <i class="icon">📈</i>
        <span>Reportes</span>
      </div>
      <div class="nav-item">
        <i class="icon">⚙️</i>
        <span>Configuración</span>
      </div>
      <div class="nav-item" id="adminPanelButton" style="display: none;">
        <i class="icon">👑</i>
        <span>Panel Admin</span>
      </div>
      <div class="nav-item" id="logoutButton">
        <i class="icon">🚪</i>
        <span>Cerrar Sesión</span>
      </div>
      
      <div class="sidebar-footer">
        <div class="quick-links">
          <h4>ENLACES RÁPIDOS</h4>
          <div class="quick-links-grid">
            <div class="quick-link"><i class="icon">📊</i></div>
            <div class="quick-link"><i class="icon">💼</i></div>
            <div class="quick-link"><i class="icon">🧠</i></div>
            <div class="quick-link"><i class="icon">📡</i></div>
            <div class="quick-link"><i class="icon">🔍</i></div>
            <div class="quick-link"><i class="icon">➕</i></div>
          </div>
        </div>
        
        <div class="chat-support">
          <h4>CHAT CON NOSOTROS</h4>
          <div class="support-status">
            <span class="online-indicator"></span>
            <span>ONLINE</span>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Contenido principal -->
    <div class="content">
      <!-- Cabecera de página -->
      <div class="page-header">
        <div class="welcome-message">Bienvenido, <span id="welcomeUserName">Inversor</span></div>
        <div class="date-display" id="currentDate">Cargando fecha...</div>
      </div>
      
      <!-- Tarjetas de resumen -->
      <div class="summary-cards">
        <div class="card">
          <div class="card-header">
            <div>
              <div class="card-title">BALANCE TOTAL</div>
            </div>
            <div class="card-icon-container">💰</div>
          </div>
          <div class="card-value" id="totalBalance">$0.00</div>
          <div class="card-footer">
            <div class="change-indicator positive-change">↑ 2.3%</div>
            <div>este mes</div>
          </div>
        </div>
        
        <div class="card">
          <div class="card-header">
            <div>
              <div class="card-title">CAPITAL INVERTIDO</div>
            </div>
            <div class="card-icon-container">📈</div>
          </div>
          <div class="card-value" id="investedCapital">$0.00</div>
          <div class="card-footer">
            <div>desde</div>
            <div id="joinDate">01/01/2024</div>
          </div>
        </div>
        
        <div class="card">
          <div class="card-header">
            <div>
              <div class="card-title">DISPONIBLE</div>
            </div>
            <div class="card-icon-container">💵</div>
          </div>
          <div class="card-value" id="availableBalance">$0.00</div>
          <div class="card-footer">
            <div>para retirar o reinvertir</div>
          </div>
        </div>
        
        <div class="card">
          <div class="card-header">
            <div>
              <div class="card-title">GANANCIAS TOTALES</div>
            </div>
            <div class="card-icon-container">✨</div>
          </div>
          <div class="card-value" id="totalProfit">$0.00</div>
          <div class="card-footer">
            <div class="change-indicator positive-change">↑ 5.7%</div>
            <div>de rendimiento</div>
          </div>
        </div>
      </div>
      
      <!-- Gráficos de rendimiento -->
      <div class="performance-section">
        <div class="section-title">
          <div>Rendimiento</div>
          <div class="period-selector">
            <div class="period-option active">Día</div>
            <div class="period-option">Semana</div>
            <div class="period-option">Mes</div>
            <div class="period-option">Año</div>
          </div>
        </div>
        <div class="charts-row">
          <div class="card chart-container">
            <canvas id="dailyChart" width="150" height="150"></canvas>
            <div class="chart-label">
              <div class="chart-percentage" id="dailyPerformance">0%</div>
              <div class="chart-description">Diario</div>
            </div>
          </div>
          
          <div class="card chart-container">
            <canvas id="weeklyChart" width="150" height="150"></canvas>
            <div class="chart-label">
              <div class="chart-percentage" id="weeklyPerformance">0%</div>
              <div class="chart-description">Semanal</div>
            </div>
          </div>
          
          <div class="card chart-container">
            <canvas id="monthlyChart" width="150" height="150"></canvas>
            <div class="chart-label">
              <div class="chart-percentage" id="monthlyPerformance">0%</div>
              <div class="chart-description">Mensual</div>
            </div>
          </div>
          
          <div class="card chart-container">
            <canvas id="yearlyChart" width="150" height="150"></canvas>
            <div class="chart-label">
              <div class="chart-percentage" id="yearlyPerformance">0%</div>
              <div class="chart-description">Anual</div>
            </div>
          </div>
        </div>
      </div>
      
      <!-- Sección principal de datos -->
      <div class="main-data-section">
        <!-- Columna izquierda: Inversiones y transacciones -->
        <div>
          <div class="tabs-container">
            <div class="section-title">
              <div>Mi Portafolio</div>
            </div>
            <div class="tabs">
              <div class="tab active" data-tab="investments">Inversiones</div>
              <div class="tab" data-tab="transactions">Transacciones</div>
            </div>
          </div>
          
          <!-- Tabla de inversiones -->
          <div class="tab-content" id="investmentsContent">
            <div class="table-container">
              <table id="investmentsTable">
                <thead>
                  <tr>
                    <th>Activo</th>
                    <th>Cantidad</th>
                    <th>Valor (USD)</th>
                    <th>Cambio 24h</th>
                    <th>Asignación</th>
                  </tr>
                </thead>
                <tbody>
                  <!-- Datos cargados dinámicamente -->
                </tbody>
              </table>
            </div>
          </div>
          
          <!-- Tabla de transacciones -->
          <div class="tab-content" id="transactionsContent" style="display: none;">
            <div class="table-container">
              <table id="transactionsTable">
                <thead>
                  <tr>
                    <th>Fecha</th>
                    <th>Tipo</th>
                    <th>Monto</th>
                    <th>Estado</th>
                    <th>Descripción</th>
                  </tr>
                </thead>
                <tbody>
                  <!-- Datos cargados dinámicamente -->
                </tbody>
              </table>
            </div>
          </div>
        </div>
        
        <!-- Columna derecha: Información de categoría y próximos eventos -->
        <div>
          <!-- Categoría del inversionista -->
          <div class="card category-info">
            <div class="card-header">
              <div>
                <div class="card-title">NIVEL DE INVERSOR</div>
                <div id="categoryTitle" class="card-value">Cargando...</div>
              </div>
              <div class="card-icon-container">🏆</div>
            </div>
            
            <div id="categoryFeatures">
              <!-- Características de la categoría cargadas dinámicamente -->
            </div>
            
            <div id="categoryProgressContainer" class="category-progress-container">
              <div class="progress-bar-container">
                <div id="categoryProgress" class="progress-bar" style="width: 0%"></div>
              </div>
              <div id="categoryProgressText" class="progress-text">Cargando progreso...</div>
            </div>
          </div>
          
          <!-- Actividad reciente -->
          <div class="card">
            <div class="card-header">
              <div>
                <div class="card-title">ACTIVIDAD RECIENTE</div>
              </div>
              <div class="card-icon-container">🔔</div>
            </div>
            
            <div class="recent-activity">
              <div class="activity-item">
                <div class="activity-icon">📈</div>
                <div class="activity-content">
                  <div class="activity-title">Rendimiento actualizado</div>
                  <div class="activity-time">Hace 10 minutos</div>
                </div>
              </div>
              
              <div class="activity-item">
                <div class="activity-icon">📊</div>
                <div class="activity-content">
                  <div class="activity-title">Reporte mensual disponible</div>
                  <div class="activity-time">Hace 2 horas</div>
                </div>
              </div>
              
              <div class="activity-item">
                <div class="activity-icon">🌟</div>
                <div class="activity-content">
                  <div class="activity-title">Bonus acreditado</div>
                  <div class="activity-time">Ayer</div>
                </div>
              </div>
            </div>
          </div>
          
          <!-- Calendario -->
          <div class="card">
            <div class="card-header">
              <div>
                <div class="card-title">MI CALENDARIO</div>
              </div>
              <div class="card-icon-container">📅</div>
            </div>
            
            <div class="calendar">
              <div class="calendar-header">
                <div>Marzo 2025</div>
              </div>
              
              <div class="calendar-grid">
                <div class="calendar-day calendar-day-header">D</div>
                <div class="calendar-day calendar-day-header">L</div>
                <div class="calendar-day calendar-day-header">M</div>
                <div class="calendar-day calendar-day-header">X</div>
                <div class="calendar-day calendar-day-header">J</div>
                <div class="calendar-day calendar-day-header">V</div>
                <div class="calendar-day calendar-day-header">S</div>
                
                <!-- Primera semana -->
                <div class="calendar-day">25</div>
                <div class="calendar-day">26</div>
                <div class="calendar-day">27</div>
                <div class="calendar-day">28</div>
                <div class="calendar-day">1</div>
                <div class="calendar-day">2</div>
                <div class="calendar-day">3</div>
                
                <!-- Segunda semana -->
                <div class="calendar-day">4</div>
                <div class="calendar-day">5</div>
                <div class="calendar-day">6</div>
                <div class="calendar-day">7</div>
                <div class="calendar-day">8</div>
                <div class="calendar-day has-event">9</div>
                <div class="calendar-day">10</div>
                
                <!-- Tercera semana -->
                <div class="calendar-day">11</div>
                <div class="calendar-day">12</div>
                <div class="calendar-day">13</div>
                <div class="calendar-day">14</div>
                <div class="calendar-day has-event">15</div>
                <div class="calendar-day">16</div>
                <div class="calendar-day">17</div>
                
                <!-- Cuarta semana -->
                <div class="calendar-day">18</div>
                <div class="calendar-day">19</div>
                <div class="calendar-day">20</div>
                <div class="calendar-day">21</div>
                <div class="calendar-day">22</div>
                <div class="calendar-day">23</div>
                <div class="calendar-day">24</div>
                
                <!-- Quinta semana -->
                <div class="calendar-day">25</div>
                <div class="calendar-day today">26</div>
                <div class="calendar-day has-event">27</div>
                <div class="calendar-day">28</div>
                <div class="calendar-day">29</div>
                <div class="calendar-day">30</div>
                <div class="calendar-day">31</div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  
  <!-- Incluir Chart.js para gráficos interactivos -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  
  <script>
    // Crear estrellas en el fondo
    document.addEventListener('DOMContentLoaded', () => {
      const starsContainer = document.getElementById('stars');
      const numStars = Math.floor(window.innerWidth * window.innerHeight / 1000);
      
      for (let i = 0; i < numStars; i++) {
        const star = document.createElement('div');
        star.style.position = 'absolute';
        star.style.left = `${Math.random() * 100}%`;
        star.style.top = `${Math.random() * 100}%`;
        
        const size = Math.random() * 3 + 1;
        star.style.width = `${size}px`;
        star.style.height = `${size}px`;
        
        star.style.borderRadius = '50%';
        star.style.backgroundColor = '#ffffff';
        star.style.opacity = Math.random() * 0.7 + 0.3;
        
        const animationDuration = Math.random() * 4 + 2;
        star.style.animation = `twinkle ${animationDuration}s infinite alternate`;
        
        starsContainer.appendChild(star);
      }
      
      // Animación de parpadeo para estrellas
      const styleElement = document.createElement('style');
      styleElement.textContent = `
        @keyframes twinkle {
          0% { opacity: 0.3; }
          100% { opacity: 1; }
        }
      `;
      document.head.appendChild(styleElement);
      
      // Mostrar fecha actual
      const dateOptions = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
      const currentDate = new Date();
      document.getElementById('currentDate').textContent = currentDate.toLocaleDateString('es-ES', dateOptions);
      
      // Inicializar pestañas
      const tabs = document.querySelectorAll('.tab');
      const tabContents = document.querySelectorAll('.tab-content');
      
      tabs.forEach(tab => {
        tab.addEventListener('click', () => {
          // Desactivar todas las pestañas
          tabs.forEach(t => t.classList.remove('active'));
          tabContents.forEach(content => content.style.display = 'none');
          
          // Activar la pestaña seleccionada
          tab.classList.add('active');
          const tabId = tab.getAttribute('data-tab');
          document.getElementById(`${tabId}Content`).style.display = 'block';
        });
      });
      
      // Configurar subida de foto de perfil
      const photoUploadBtn = document.getElementById('photoUploadBtn');
      const photoInput = document.getElementById('photoInput');
      const photoForm = document.getElementById('photoUploadForm');
      
      photoUploadBtn.addEventListener('click', () => {
        photoInput.click();
      });
      
      photoInput.addEventListener('change', async () => {
        if (photoInput.files && photoInput.files[0]) {
          const formData = new FormData();
          formData.append('photo', photoInput.files[0]);
          
          try {
            const response = await fetch('/api/investor/upload-photo', {
              method: 'POST',
              body: formData
            });
            
            const data = await response.json();
            
            if (data.success) {
              // Actualizar la imagen de perfil
              const avatar = document.getElementById('userAvatar');
              avatar.style.backgroundImage = `url(${data.photo_url})`;
              avatar.textContent = '';
            } else {
              console.error('Error al subir la foto:', data.message);
            }
          } catch (error) {
            console.error('Error al subir la foto:', error);
          }
        }
      });
      
      // Obtener datos del usuario y sus inversiones
      getUserInfo();
      
      // Cerrar sesión
      document.getElementById('logoutButton').addEventListener('click', async () => {
        try {
          const response = await fetch('/api/auth/logout', {
            method: 'POST'
          });
          
          const data = await response.json();
          
          if (data.success) {
            window.location.href = '/login';
          }
        } catch (error) {
          console.error('Error al cerrar sesión:', error);
        }
      });
    });
    
    // Formatear número como moneda
    function formatCurrency(value) {
      return new Intl.NumberFormat('es-ES', {
        style: 'currency',
        currency: 'USD',
        minimumFractionDigits: 2
      }).format(value);
    }
    
    // Formatear número como porcentaje
    function formatPercentage(value) {
      return `${value.toFixed(2)}%`;
    }
    
    // Crear gráfico circular
    function createDonutChart(canvasId, percentage, color) {
      const canvas = document.getElementById(canvasId);
      if (!canvas) return null;
      
      return new Chart(canvas, {
        type: 'doughnut',
        data: {
          datasets: [{
            data: [percentage, 100 - percentage],
            backgroundColor: [
              color,
              'rgba(123, 97, 255, 0.1)'
            ],
            borderColor: [
              color,
              'transparent'
            ],
            borderWidth: 1,
            borderRadius: 5,
            hoverOffset: 4
          }]
        },
        options: {
          cutout: '75%',
          responsive: true,
          maintainAspectRatio: true,
          animation: {
            duration: 2000,
            animateRotate: true,
            animateScale: true
          },
          plugins: {
            legend: {
              display: false
            },
            tooltip: {
              enabled: false
            }
          }
        }
      });
    }
    
    // Obtener datos del usuario
    async function getUserInfo() {
      try {
        // Primero verificar si el usuario está autenticado
        const authResponse = await fetch('/api/auth/status');
        const authData = await authResponse.json();
        
        if (!authData.authenticated) {
          window.location.href = '/login';
          return;
        }
        
        // Mostrar información básica del usuario
        document.getElementById('userName').textContent = authData.user.name;
        document.getElementById('welcomeUserName').textContent = authData.user.name;
        document.getElementById('userRole').textContent = authData.user.role === 'super_admin' ? 'Super Administrador' : 
                                                        authData.user.role === 'admin' ? 'Administrador' : 'Inversionista';
        
        // Mostrar iniciales en avatar
        const avatar = document.getElementById('userAvatar');
        const initials = authData.user.name.split(' ')
                          .map(name => name[0])
                          .join('')
                          .toUpperCase()
                          .substring(0, 2);
        avatar.textContent = initials;
        
        // Si es administrador, mostrar enlace al panel de admin
        if (authData.user.role === 'admin' || authData.user.role === 'super_admin') {
          const adminButton = document.getElementById('adminPanelButton');
          adminButton.style.display = 'flex';
          adminButton.addEventListener('click', () => {
            if (authData.user.role === 'super_admin') {
              window.location.href = '/super-admin';
            } else {
              window.location.href = '/admin';
            }
          });
        }
        
        // Obtener datos del inversionista
        const investorResponse = await fetch('/api/investor/current');
        const investorData = await investorResponse.json();
        
        if (investorData.success) {
          displayInvestorData(investorData.investor, investorData.category_info);
        } else {
          console.error('Error al obtener datos del inversionista:', investorData.message);
        }
        
      } catch (error) {
        console.error('Error al obtener información del usuario:', error);
      }
    }
    
    // Mostrar datos del inversionista
    function displayInvestorData(investor, categoryInfo) {
      // Actualizar resumen del portafolio
      document.getElementById('totalBalance').textContent = formatCurrency(investor.balance);
      document.getElementById('investedCapital').textContent = formatCurrency(investor.invested);
      document.getElementById('availableBalance').textContent = formatCurrency(investor.available);
      document.getElementById('totalProfit').textContent = formatCurrency(investor.total_profit);
      document.getElementById('joinDate').textContent = investor.join_date;
      
      // Actualizar rendimientos y crear gráficos
      document.getElementById('dailyPerformance').textContent = formatPercentage(investor.performance.daily);
      document.getElementById('weeklyPerformance').textContent = formatPercentage(investor.performance.weekly);
      document.getElementById('monthlyPerformance').textContent = formatPercentage(investor.performance.monthly);
      document.getElementById('yearlyPerformance').textContent = formatPercentage(investor.performance.yearly);
      
      // Crear gráficos
      createDonutChart('dailyChart', investor.performance.daily, 'var(--color-chart-1)');
      createDonutChart('weeklyChart', investor.performance.weekly, 'var(--color-chart-2)');
      createDonutChart('monthlyChart', investor.performance.monthly, 'var(--color-chart-3)');
      createDonutChart('yearlyChart', investor.performance.yearly, 'var(--color-chart-4)');
      
      // Añadir insignia de categoría
      const categoryBadgeContainer = document.getElementById('categoryBadgeContainer');
      categoryBadgeContainer.innerHTML = '';
      const categoryBadge = document.createElement('div');
      categoryBadge.className = `category-badge category-${investor.category}`;
      categoryBadge.textContent = investor.category.toUpperCase();
      categoryBadgeContainer.appendChild(categoryBadge);
      
      // Actualizar información de categoría
      document.getElementById('categoryTitle').textContent = `${investor.category.toUpperCase()}`;
      
      // Añadir características de la categoría
      const categoryFeaturesContainer = document.getElementById('categoryFeatures');
      categoryFeaturesContainer.innerHTML = '';
      if (categoryInfo && categoryInfo.features) {
        const featureList = document.createElement('ul');
        featureList.style.paddingLeft = '20px';
        featureList.style.marginTop = '10px';
        featureList.style.marginBottom = '15px';
        categoryInfo.features.forEach(feature => {
          const featureItem = document.createElement('li');
          featureItem.textContent = feature;
          featureItem.style.marginBottom = '5px';
          featureList.appendChild(featureItem);
        });
        categoryFeaturesContainer.appendChild(featureList);
        
        // Mostrar progreso hacia la siguiente categoría
        if (investor.category !== 'platinum') {
          const categories = ['bronze', 'silver', 'gold', 'platinum'];
          const currentIndex = categories.indexOf(investor.category);
          const nextCategory = categories[currentIndex + 1];
          const nextCategoryInfo = getNextCategoryInfo(investor.category);
          
          if (nextCategoryInfo) {
            // Calcular progreso
            const progress = Math.min(100, (investor.balance / nextCategoryInfo.min_investment) * 100);
            document.getElementById('categoryProgress').style.width = `${progress}%`;
            document.getElementById('categoryProgressText').textContent = 
              `${formatCurrency(investor.balance)} de ${formatCurrency(nextCategoryInfo.min_investment)} para alcanzar la categoría ${nextCategory.toUpperCase()}`;
          }
        } else {
          document.getElementById('categoryProgressContainer').style.display = 'none';
          document.getElementById('categoryProgressText').textContent = '¡Has alcanzado la categoría más alta!';
        }
      }
      
      // Mostrar inversiones
      displayInvestments(investor.investments);
      
      // Mostrar transacciones
      displayTransactions(investor.transactions);
    }
    
    // Obtener información de la siguiente categoría
    function getNextCategoryInfo(currentCategory) {
      const categories = {
        'bronze': { min_investment: 10000 },  // Para pasar a Silver
        'silver': { min_investment: 50000 },  // Para pasar a Gold
        'gold': { min_investment: 100000 }    // Para pasar a Platinum
      };
      
      return categories[currentCategory];
    }
    
    // Mostrar inversiones
    function displayInvestments(investments) {
      const tableBody = document.getElementById('investmentsTable').getElementsByTagName('tbody')[0];
      tableBody.innerHTML = '';
      
      if (!investments || investments.length === 0) {
        const row = tableBody.insertRow();
        const cell = row.insertCell();
        cell.colSpan = 5;
        cell.textContent = 'No hay inversiones activas';
        cell.style.textAlign = 'center';
        return;
      }
      
      investments.forEach(investment => {
        const row = tableBody.insertRow();
        
        // Activo
        const assetCell = row.insertCell();
        assetCell.innerHTML = `<strong>${investment.name}</strong> (${investment.symbol})`;
        
        // Cantidad
        const amountCell = row.insertCell();
        amountCell.textContent = investment.amount;
        
        // Valor
        const valueCell = row.insertCell();
        valueCell.textContent = formatCurrency(investment.value_usd);
        
        // Cambio 24h
        const changeCell = row.insertCell();
        const isPositive = investment.change_24h >= 0;
        changeCell.textContent = `${isPositive ? '+' : ''}${investment.change_24h}%`;
        changeCell.className = isPositive ? 'positive-change' : 'negative-change';
        
        // Asignación
        const allocationCell = row.insertCell();
        allocationCell.textContent = `${investment.allocation}%`;
      });
    }
    
    // Mostrar transacciones
    function displayTransactions(transactions) {
      const tableBody = document.getElementById('transactionsTable').getElementsByTagName('tbody')[0];
      tableBody.innerHTML = '';
      
      if (!transactions || transactions.length === 0) {
        const row = tableBody.insertRow();
        const cell = row.insertCell();
        cell.colSpan = 5;
        cell.textContent = 'No hay transacciones recientes';
        cell.style.textAlign = 'center';
        return;
      }
      
      transactions.forEach(transaction => {
        const row = tableBody.insertRow();
        
        // Fecha
        const dateCell = row.insertCell();
        dateCell.textContent = transaction.date;
        
        // Tipo
        const typeCell = row.insertCell();
        const typeSpan = document.createElement('span');
        typeSpan.className = `transaction-type transaction-${transaction.type}`;
        typeSpan.textContent = transaction.type.toUpperCase();
        typeCell.appendChild(typeSpan);
        
        // Monto
        const amountCell = row.insertCell();
        amountCell.textContent = formatCurrency(transaction.amount);
        
        // Estado
        const statusCell = row.insertCell();
        statusCell.innerHTML = `<span class="status status-online">${transaction.status}</span>`;
        
        // Descripción
        const descriptionCell = row.insertCell();
        descriptionCell.textContent = transaction.description;
      });
    }
  </script>
</body>
</html>